@using static BlazerTest.Components.Alert
@inherits LayoutComponentBase

@inject AlertService AlertService

<div class="page">
	<div class="sidebar">
		<NavMenu />
	</div>

	<main>
		<div class="top-row px-4">
			<NavLink href="/login" class="nav-link">ورود</NavLink>
			<NavLink href="/logout" class="nav-link">خروج</NavLink>
		</div>

		<article class="content px-4">

			<Alert @ref="alertComponent" OnDismiss="OnAlertDismiss" />
			<br />
			@Body
		</article>
	</main>
</div>

<div id="blazor-error-ui">
	An unhandled error has occurred.
	<a href="" class="reload">Reload</a>
	<a class="dismiss">🗙</a>
</div>

@code {
	private Alert alertComponent;

	protected override void OnInitialized()
	{
		AlertService.OnShow += ShowAlert;
	}

	private void ShowAlert(string message, AlertColorEnum alertColor)
	{
		alertComponent.Show(message, alertColor); // فرض بر این است که متد Show در Alert شما وجود دارد
	}

	private void OnAlertDismiss()
	{
		// عملیاتی که باید بعد از بسته شدن پاپ‌آپ انجام شود
	}

	public void Dispose()
	{
		AlertService.OnShow -= ShowAlert;
	}
}
